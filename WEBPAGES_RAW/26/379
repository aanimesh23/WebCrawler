<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>SLI | PmWiki / Passwords </title>
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href='http://sli.ics.uci.edu/pmwiki/pub/skins/custom/pmwiki.css' type='text/css' />
  <!--HTMLHeader--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none;}

--></style>  <meta name='robots' content='noindex,nofollow' />
<meta name='description' content='General use of passwords and login' />

</head>
<body>
<!--PageHeaderFmt-->
  <div id='wikilogo'><a href='http://sli.ics.uci.edu'><img src='/pmwiki/pub/skins/custom/SLI_white.png'
    alt='SLI' border='0' /></a></div>
  <div id='wikihead'>
  <form action='http://sli.ics.uci.edu'>
    <!-- <span class='headnav'><a href='http://sli.ics.uci.edu/PmWiki/RecentChanges'
      accesskey='c'>Recent Changes</a> -</span> --> 
    <input type='hidden' name='n' value='PmWiki.Passwords' />
    <input type='hidden' name='action' value='search' />
    <!-- <a href='http://sli.ics.uci.edu/Site/Search'>Search</a>: -->
    <input type='text' name='q' value='' class='inputbox searchbox' />
    <input type='submit' class='inputbutton searchbutton'
      value='Search' />
    <a href='http://sli.ics.uci.edu/Site/Search'>(?)</a>
  </form></div>
<!--/PageHeaderFmt-->
  <table id='wikimid' width='100%' cellspacing='0' cellpadding='0'><tr>
<!--PageLeftFmt-->
      <td id='wikileft' valign='top'>
        <ul><li><a class='wikilink' href='http://sli.ics.uci.edu/Classes/Classes'>Classes</a>
</li><li><a class='wikilink' href='http://sli.ics.uci.edu/Group/Group'>Group</a>
</li><li><a class='wikilink' href='http://sli.ics.uci.edu/Projects/Projects'>Research</a>
</li><li><a class='urllink' href='http://www.ics.uci.edu/~ihler/pubs.html' rel='nofollow'>Publications</a>
</li><li><a class='wikilink' href='http://sli.ics.uci.edu/Code/Code'>Code</a>
</li></ul><div class='vspace'></div><hr />
<div class='vspace'></div>
</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
<!--PageActionFmt-->
        <div id='wikicmds'><ul><li class='browse'><a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/Passwords?action=login'>login</a>
</li></ul>
</div>
<!--PageTitleFmt-->
        <div id='wikititle'>
          <div class='pagegroup'><a href='http://sli.ics.uci.edu/PmWiki'>PmWiki</a> /</div>
          <h1 class='pagetitle'>Passwords</h1></div>
<!--PageText-->
<div id='wikitext'>
<p>
<a name='trailstart' id='trailstart'></a> 
</p><div style='clear:right; float:right; font-size:smaller; background-color:#eee;' >
<p><span class='wikitrail'>&lt; <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/PageHistory'>Page history</a> | <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/DocumentationIndex#trailstart'>Documentation Index</a> | <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/Categories'>Categories</a> &gt;</span> 
</p></div>
<div style='clear:right;' ><span class='frame rfloat' style='font-size: smaller; background-color: #ffffcc; clear: right;'>authors </span>
</div>
<div class='frame rfloat' style='font-size: smaller;' > 
<h4>Table of contents</h4>
<ul><li><a href='#pageattr'>Protect an individual page</a>
</li><li><a href='#groupattr'>Protect a group of pages</a>
</li><li><a href='#siteattr'>Protect the site</a>
</li></ul></div>
<p><a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/PmWiki'>PmWiki</a> has built-in support for password-protecting various areas of the wiki site.  Authors generally want to be able to apply passwords to individual pages or to <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/WikiGroup'>wiki groups</a>.  Wiki Administrators can apply passwords to individual pages, to wiki groups, or to the <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/PasswordsAdmin#settingsitewidepasswords'>entire site</a>.  Setting an edit password on a <a href='#pageattr'>page</a> or <a href='#groupattr'>group</a> (or <a href='#siteattr'>the entire site</a>) is one of the most common ways to stop <a class='categorylink' href='http://sli.ics.uci.edu/Category/Spam'>spam</a>. As with any access control system, the password protection mechanisms described here are only a small part of overall system and wiki <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/Security'>security</a>.
</p>
<div class='vspace'></div><h2>As an author editing pages...</h2>
<p>An author will generally set 3 types of passwords:
</p><ol><li>to control who can see a page or group, use  <code>read</code> passwords
</li><li>to control who can edit a page or group, use <code>edit</code> passwords
</li><li>to control who can alter the passwords used to protect a page or group, use <code>attr</code> passwords
</li></ol><p class='vspace'>If required most <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/AvailableActions'>page actions</a> can be password protected.
</p>
<p class='vspace'><a name='pageattr' id='pageattr'></a>
</p><h3>Protect an individual page</h3>
<p>To set a password on an individual wiki page, add the <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/AvailableActions'>page action</a>
</p><div class='indent'><code>?action=attr</code> 
</div><p>to the page's URL (address) to access its attributes.  Using the form on the attributes page, you can set or clear the <code>read</code>, <code>edit</code>, or <code>attr</code> passwords on the page.  In the form you enter the passwords as cleartext; PmWiki encrypts them for you automatically when it stores them. 
</p>
<p class='vspace'>Additional options:
</p><ul><li>Leaving a field blank will leave the attribute unchanged. 
</li><li>To remove a password from a page (<em>reverting back</em> to the group's or site's default), enter 
<div class='indent'><code> clear </code>
</div></li><li>To indicate that the page can be edited <em>even if a group or site password is set</em>, enter 
<div class='indent'><code> @nopass </code>
</div></li><li>To lock a page for everybody but the admin, enter 
<div class='indent'><code> @lock </code>
</div></li><li>To assign the site's site-wide passwords to the <code>read</code>, <code>edit</code>, or <code>attr</code> password for the page, enter 
<div class='indent'><code> @_site_edit, @_site_read or @_site_upload </code>
</div></li></ul><p class='vspace'><a name='groupattr' id='groupattr'></a>
</p><h3>Protect a wiki group of pages</h3>
<p>To set a password on a <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/WikiGroup'>wiki group</a> is slightly more difficult -- you just set the passwords on a <a class='createlinktext' rel='nofollow'
    href='http://sli.ics.uci.edu/PmWiki/SpecialPages?action=edit'>special page</a><a rel='nofollow' 
    class='createlink' href='http://sli.ics.uci.edu/PmWiki/SpecialPages?action=edit'>?</a> in each group called 
</p><div class='indent'><a class='createlinktext' rel='nofollow'
    href='http://sli.ics.uci.edu/PmWiki/GroupAttributes?action=edit'>GroupAttributes</a><a rel='nofollow' 
    class='createlink' href='http://sli.ics.uci.edu/PmWiki/GroupAttributes?action=edit'>?</a>
</div><p class='vspace'>First, you can get to the attributes page for GroupAttributes by entering a URL (address) like 
</p><div class='indent'><code class='escaped'>http://example.com/pmwiki/pmwiki.php?n=GroupName.GroupAttributes?action=attr</code>
</div><p>Replace example.com with your domain name, and GroupName with the name of the group
</p>
<p class='vspace'>Then, using the form on the attributes page, you can set or clear the <code>read</code>, <code>edit</code>, or <code>attr</code> passwords for the entire group.  In the form you enter the passwords as cleartext; PmWiki encrypts them for you automatically.
</p>
<p class='vspace'>Additional options:
</p><ul><li>To remove a password from a group (<em>reverting back</em> to the site's default), enter 
<div class='indent'><code>clear</code>
</div></li><li>To indicate that the group can be edited <em>even if a site password is set</em>, enter 
<div class='indent'><code>@nopass</code>
</div></li><li>To lock a group for everybody but the admin, enter 
<div class='indent'><code>@lock</code>
</div></li><li>(Beginning with Ver 2.2.3) To assign the site's site-wide passwords to the <code>read</code>, <code>edit</code>, or <code>attr</code> password for the group, enter 
<div class='indent'><code> @_site_edit, @_site_read or @_site_upload </code>
</div></li></ul><div class='vspace'></div><h2>Passwords</h2>
<p>Passwords may consist of any combination of characters, except double "quotes" or 'apostrophes'.
Passwords with spaces or colons must be entered using quotes, eg "foo bar" or "foo:bar".
Obviously longer is <a class='urllink' href='http://www.microsoft.com/protect/fraud/passwords/create.aspx' rel='nofollow'>better</a>, and on some systems passwords need to have 4 or more characters.
</p>
<div class='vspace'></div><h2>Multiple passwords</h2>
<p>Multiple passwords for a page, group or site are allowed. 
Simply enter multiple passwords separated by a space. This allows you to have a read password, a write password, and have the write password allow read/write access.  In other words, if the read password is 
</p><div class='indent'>alpha
</div><p>and the edit password is 
</p><div class='indent'>beta
</div><p>then enter
</p><div class='indent'><pre class='escaped'>Set new read password: alpha beta
Set new edit password: beta</pre>
</div><p class='vspace'>This says that either 
</p><div class='indent'>alpha
</div><p>or 
</p><div class='indent'>beta
</div><p>can be used to read pages, but only 
</p><div class='indent'>beta
</div><p>may edit. Since PmWiki checks the passwords you've entered since the browser has been opened, entering a read password that is also a write password allows both reading and writing.
</p>
<p class='vspace'><a name='siteattr' id='siteattr'></a>
</p><h3>Protect the site</h3>
<p>Passwords can be applied to the entire wiki website in <em>config.php</em>.
See <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/PasswordsAdmin#settingsitewidepasswords'>passwords</a> administration for details.
</p>
<p class='vspace'><span class='frame rfloat' style='font-size: smaller; background-color: #ffffcc; clear: right;'> administrator</span>
</p>
<p class='vspace'><a name='administrators' id='administrators'></a>
</p><h2>As an administrator ...</h2>
<p>You can set passwords on pages and groups exactly as described above for authors. You can also:
</p><ol><li>set site-wide passwords for pages and groups that do not have passwords
</li><li>use <code>attr</code> passwords to control who is able to set passwords on pages
</li><li>use <code>upload</code> passwords to control access to the file <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/Uploads'>upload</a> capabilities (if uploads are enabled)
</li><li>use an <code>admin</code> password to override the passwords set for any individual page or group
</li><li>use <a class='wikilink' href='http://sli.ics.uci.edu/SiteAdmin/AuthList'>SiteAdmin.AuthList</a> to view the permissions settings for pages that have permissions set.  
</li></ol><p>For more information on password options available to administrators, see <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/PasswordsAdmin'>PasswordsAdmin</a>.
</p>
<div class='vspace'></div><h2><a name='priority' id='priority'></a>Which password wins?</h2>
<p>In PmWiki, page passwords override group passwords, group passwords override the <em>default</em> passwords, and the <code>admin</code> password overrides all passwords.  This gives a great deal of flexibility in controlling access to wiki pages in PmWiki. 
</p>
<p class='vspace'>The <a class='createlinktext' rel='nofollow'
    href='http://sli.ics.uci.edu/PmWiki/SpecialPages?action=edit'>special page</a><a rel='nofollow' 
    class='createlink' href='http://sli.ics.uci.edu/PmWiki/SpecialPages?action=edit'>?</a> <a class='wikilink' href='http://sli.ics.uci.edu/SiteAdmin/AuthList'>SiteAdmin.AuthList</a> is a page list of all pages with access permissions set.
</p>
<div class='vspace'></div><h2>Opening access to pages in protected groups/sites</h2>
<p>Sometimes we want to "unprotect" pages in a group or site that is otherwise protected.  In these cases, the special password 
</p><div class='indent'><code> @nopass </code>
</div><p>is used to indicate that access should be allowed to a page without requiring a password.  
</p>
<p class='vspace'>For example, suppose Main.GroupAttributes has an edit password set, thus restricting the editing of all pages in Main.  Now we want Main.WikiSandbox to be editable without a password.  Using 
</p><div class='indent'><code>clear</code>
</div><p>for the edit password for Main.WikiSandbox <em>doesn't unprotect the page</em>, because the password is being set by the group.  Instead, we set the edit password for Main.WikiSandbox to the special value 
</p><div class='indent'><code> @nopass </code>
</div><p>which tells PmWiki to ignore any site-wide or group-level passwords for that page.
</p>
<div class='vspace'></div><div class='faq' > <a name='faq' id='faq'></a> 
<p class='vspace'><a name='site' id='site'></a>
</p><p class='question'>  How can I password protect all the pages and groups on my site?  Do I really have to set passwords page by page, or group by group?</p>
<p class='vspace'>  Administrators can set passwords for the entire site by editing the config.php file; they don't have to set passwords for each page or group.  For example, to set the entire site to be editable only by those who know an "edit" password, an administrator can add a line like the following to local/config.php:
</p>
<div class='vspace'></div><div class='indent'> <code>  <a class='varlink' href='http://sli.ics.uci.edu/PmWiki/SecurityVariables#DefaultPasswords'><code class='varlink'>&#36;DefaultPasswords</code></a>['edit'] = pmcrypt('edit_password'); </code>
</div><p class='vspace'>For more information about the password options that are available only to administrators, see <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/PasswordsAdmin'>PasswordsAdmin</a>.
</p>
<p class='vspace question'>  I get http error 500 "Internal Server Error" when I try to log in. What's wrong?</p>
<p class='vspace'>  This can happen if the encrypted passwords are not created on the web server that hosts the PmWiki.<br />The <a class='urllink' href='http://php.net/crypt' rel='nofollow'>PHP crypt() function</a> changed during the PHP development, e.g. a password encrypted with PHP 5.2 can not be decrypted in PHP 5.1, but PHP 5.2 can decrypt passwords created by PHP 5.1.<br />This situation normally happens if you prepare everything on your local machine with the latest PHP version and you upload the passwords to a webserver which is running an older version.<br />The same error occurs when you add encrypted passwords to local/config.php.
</p>
<p class='vspace'>Solution: Create the passwords on the system with the oldest PHP version and use them on all other systems.
</p>
<p class='vspace question'>  How can I create private groups for users, so that each user can edit pages in their group, but no one else (other than the admin) can?</p>
<p class='vspace'> Modify the edit attribute for each group to id:username, e.g. set the edit attribute in JaneDoe.GroupAttributes to id:JaneDoe.
</p>
<p class='vspace'>There is a more automatic solution, but it's probably not a good idea for most wikis. Administrators can use the <a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/AuthUser' rel='nofollow'>AuthUser</a> recipe and add the following few lines to their local/config.php file to set this up:
</p><div class='indent'><pre class='escaped'>$group = FmtPageName('$Group', $pagename);
$DefaultPasswords['edit'] = 'id:'.$group;
include_once("$FarmD/scripts/authuser.php"); </pre>
</div><p>This automatically gives edit rights to a group to every user who has the same user name as the group name. Unfortunately it also gives edit rights to such a user who is visiting a same-named group not just for pages in that group, but for any page on the wiki that relies on the site's default edit password. This can create security holes.
</p>
<p class='vspace question'> <a name='farm' id='farm'></a> How come when I switch to another wiki within a farm, I keep my same authorization?</p>
<p class='vspace'> PmWiki uses PHP sessions to keep track of authentication/authorization information, and by default PHP sets things up such that all interactions with the same server are considered part of the same session.
</p>
<p class='vspace'>An easy way to fix this is to make sure each wiki is using a different cookie name for its session identifier.  Near the top of one of the wiki's local/config.php files, before calling authuser or any other recipes, add a line like:
</p><div class='indent'>session_name('XYZSESSID');
</div><p>You can pick any alphanumeric name for XYZSESSID; for example, for the cs559-1 wiki you might choose
</p><div class='indent'>session_name('CS559SESSID');
</div><p>This will keep the two wikis' sessions independent of each other.
</p>
<p class='vspace question'> Is it possible to test the password level for display and/or if condition? Example:  * (:if WriterPassword:) (display Edit link) (:ifend:) </p>
<p class='vspace'> You can use <code class='escaped'>(:if auth edit:)</code>. See <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/ConditionalMarkup'>ConditionalMarkup</a>.
 
</p></div><div style='clear:right; float:right; font-size:smaller; background-color:#eee;' >
<p><span class='wikitrail'>&lt; <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/PageHistory'>Page history</a> | <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/DocumentationIndex#trailstart'>Documentation Index</a> | <a class='wikilink' href='http://sli.ics.uci.edu/PmWiki/Categories'>Categories</a> &gt;</span> 
</p></div>
<p><a name='trailend' id='trailend'></a>
<br clear='all' />
</p><div  style='background-color: #ffe; border-top: 1px solid black; font-size: .8em;' > 
<p>This page may have <span class='commentout-pmwikiorg'> a more recent version on <a class='urllink' href='http://www.pmwiki.org' rel='nofollow'>pmwiki.org</a>: <a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/Passwords' rel='nofollow'>PmWiki:Passwords</a>, and </span> a talk page: <a class='urllink' href='http://www.pmwiki.org/wiki/PmWiki/Passwords-Talk' rel='nofollow'>PmWiki:Passwords-Talk</a>.
</p></div>
</div>

      </td>
    </tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
    <div class='footnav' style='float:left'> Last modified April 26, 2015, at 09:01 AM</div>
    <div class='footnav' style='float:right; text-align:right'>
    <a href="http://www.ics.uci.edu">Bren School of Information and Computer Science</a><br>
    <a href="http://www.uci.edu">University of California, Irvine</a>
    </div>
  </div>
<!--HTMLFooter--><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-24148957-2"]);
	_gaq.push(["_trackPageview"]);
	(function() {
	  var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
	  ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
	  var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
	  })();
</script>
</body>
</html>
