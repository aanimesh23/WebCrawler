<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>HelpOnXapian - GraphModAlg@UCI</title>
<script type="text/javascript" src="/moin_static163/common/js/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static163/rightsidebar/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="/moin_static163/rightsidebar/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="/moin_static163/rightsidebar/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="/moin_static163/rightsidebar/css/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static163/rightsidebar/css/msie.css">
<![endif]-->


<link rel="alternate" title="GraphModAlg@UCI: HelpOnXapian" href="/group/HelpOnXapian?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=HelpOnXapian&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="/group/Main_Page">
<link rel="Alternate" title="Wiki Markup" href="/group/HelpOnXapian?action=raw">
<link rel="Alternate" media="print" title="Print View" href="/group/HelpOnXapian?action=print">
<link rel="Search" href="/group/FindPage">
<link rel="Index" href="/group/TitleIndex">
<link rel="Glossary" href="/group/WordIndex">
<link rel="Help" href="/group/HelpOnFormatting">
</head>

<body  lang="en" dir="ltr">

<div id="header">

<form id="searchform" method="get" action="/group/HelpOnXapian">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Search:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titles" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Text" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<div id="logo"><a href="/group/Main_Page"><img src="/moin_static163/common/moinmoin.png" alt="MoinMoin Logo"></a></div>
<div id="locationline">


<ul id="pagelocation">
<li><a class="backlink" href="/group/HelpOnXapian?action=fullsearch&amp;context=180&amp;value=linkto%3A%22HelpOnXapian%22" rel="nofollow" title="Click to do a full-text search for this title">HelpOnXapian</a></li>
</ul>

</div>

</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="/group/Main_Page">Main_Page</a></li><li class="wikilink"><a href="/group/RecentChanges">RecentChanges</a></li><li class="wikilink"><a href="/group/FindPage">FindPage</a></li><li class="wikilink"><a href="/group/HelpContents">HelpContents</a></li><li class="current"><a href="/group/HelpOnXapian">HelpOnXapian</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>Page</h1>
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="#" class="nbcomment" onClick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="/group/HelpOnXapian?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="/group/HelpOnXapian?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="/group/HelpOnXapian">
<div>
    <label>More Actions:</label>
    <select name="action"
        onchange="if ((this.selectedIndex != 0) &&
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="refresh">Delete Cache</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="RenamePage" disabled class="disabled">Rename Page</option>
<option value="DeletePage" disabled class="disabled">Delete Page</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Subscribe User</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="show" disabled class="disabled">Remove Spam</option>
<option value="show" disabled class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled class="disabled">------------------------</option>
<option value="Load">Load</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    <input type="submit" value="Do">
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="/group/HelpOnXapian?action=login" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line874">Using Xapian you can dramatically improve the performance of searching in moin and furthermore unlock some more features (see the search prefixes above) not possible with the legacy search engine. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="(!)" height="15" src="/moin_static163/rightsidebar/img/idea.png" title="(!)" width="15" /> New in release 1.6 <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span></li></ul><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li>
<a href="#Setting_it_up">Setting it up</a><ol><li>
<a href="#Requirements">Requirements</a></li><li>
<a href="#Configuration">Configuration</a></li><li>
<a href="#A.28Re-.29Building_an_index">(Re-)Building an index</a></li><li>
<a href="#Testing">Testing</a></li></ol></li><li>
<a href="#Usage">Usage</a></li></ol></div> <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line867">
<h1 id="Setting_it_up">Setting it up</h1>
<span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line867">
<h2 id="Requirements">Requirements</h2>
<span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line862">You must have Xapian itself and its Python bindings (xapian-core and xapian-bindings) from <a class="http" href="http://www.xapian.org/">http://www.xapian.org/</a> at least in version 0.9.6 installed. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line862">It is also recommended to install <a class="http" href="http://snowball.tartarus.org/download.php">PyStemmer</a> to be able to search for stemmed words. Please note that you need to have Py<tt class="backtick"></tt>Stemmer installed <strong>before</strong> building the index if you want to use this feature! You can always rebuild the index after installing it at any later time, though. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line867">
<h2 id="Configuration">Configuration</h2>
<span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line874">In your wikiconfig, you have several options on how to configure Xapian: <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><ul><li><p class="line891"><strong>xapian_search</strong> (default: False) <span class="anchor" id="line-28"></span><ul><li style="list-style-type:none"><p class="line862">Setting this to True, enables Xapian search for your <a href="/group/MoinMoin">MoinMoin</a> wiki. <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line891"><img alt="(!)" height="15" src="/moin_static163/rightsidebar/img/idea.png" title="(!)" width="15" /> Moin will auto disable xapian_search (and fall back to slow search) if it doesn't find a usable index. You can see whether it uses Xapian on <a href="/group/SystemInfo">SystemInfo</a>. <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span></li></ul></li><li class="gap"><p class="line891"><strong>xapian_index_history</strong> (default: False) <span class="anchor" id="line-33"></span><ul><li style="list-style-type:none"><p class="line862">If this option is enabled, all revisions of all pages (except underlay, of which only one revision is available) are indexed. This allows users to search in older revisions of pages if enabled in the search dialogue on <a href="/group/FindPage">FindPage</a>. <span class="anchor" id="line-34"></span><img alt="/!\" height="15" src="/moin_static163/rightsidebar/img/alert.png" title="/!\" width="15" /> You need to rebuild your index if you change this option. Also check the size of your index after build if you're running a big wiki as this feature can eat up a lot of disk space. Creating the index might take rather long, if indexing history is enabled. <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span></li></ul></li><li class="gap"><p class="line891"><strong>xapian_index_dir</strong> (default: None) <span class="anchor" id="line-37"></span><ul><li style="list-style-type:none"><p class="line862">This option lets you specifiy a separate directory to save your index to. Initially, it gets saved to <em>data_dir</em>/cache/xapian/. Furthermore, if this option is used, every wiki on a wikifarm gets its own index identified by it's wikiname as opposed to a single index in standard configuration. Set this option if running a wikifarm! <span class="anchor" id="line-38"></span><img alt="/!\" height="15" src="/moin_static163/rightsidebar/img/alert.png" title="/!\" width="15" /> Don't forget to (re-)build an/the index/indices after enabling this! <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span></li></ul></li><li class="gap"><p class="line891"><strong>xapian_stemming</strong> (default: True) <span class="anchor" id="line-41"></span><ul><li style="list-style-type:none"><p class="line862">If enabled and <a class="nonexistent" href="/group/PyStemmer">PyStemmer</a> being available (see above), words will be indexed in their raw and stemmed forms and terms in your search query are stemmed in your language. This means that searching for "testing" will also yield pages containing the words "tested", "tester" etc. <span class="anchor" id="line-42"></span><img alt="/!\" height="15" src="/moin_static163/rightsidebar/img/alert.png" title="/!\" width="15" /> Enabling/disabling this option (or installing <a class="nonexistent" href="/group/PyStemmer">PyStemmer</a> later) needs a complete rebuild of your index! <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span></li></ul></li></ul><p class="line867">
<h2 id="A.28Re-.29Building_an_index">(Re-)Building an index</h2>
<span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line862">You can use the supplied command line tool <em>moin</em> to initially build, completely rebuild and update an existing index. <span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line874">To build your index the first time, execute <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><pre><span class="anchor" id="line-1"></span>moin index build --mode=add</pre><span class="anchor" id="line-52"></span><p class="line862">in your command line. You can check the status of Xapian and its index on <a href="/group/SystemInfo">SystemInfo</a>. <span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><p class="line874">Moreover, the following modes can be passed to the command above to control the building of the index: <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><ul><li><p class="line891"><strong>add</strong> <span class="anchor" id="line-57"></span><ul><li style="list-style-type:none">Items are added without checking if they are already in the index. Only use this mode if you haven't got an index already. <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span></li></ul></li><li class="gap"><p class="line891"><strong>rebuild</strong> <span class="anchor" id="line-60"></span><ul><li style="list-style-type:none"><p class="line862">Before going into <em>add</em> mode, this option deletes the previous index, if existing. <span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span></li></ul></li><li class="gap"><p class="line891"><strong>update</strong> <span class="anchor" id="line-63"></span><ul><li style="list-style-type:none">Updates every page in the index based on it's last modification date. <span class="anchor" id="line-64"></span><p class="line891"><img alt="(!)" height="15" src="/moin_static163/rightsidebar/img/idea.png" title="(!)" width="15" /> Periodic invocations using this mode are <strong>not</strong> necessary as pages in the index will of course be updated upon change. This should only be used for debugging purposes if pages in the index are not up-to-date. <span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span></li></ul></li></ul><p class="line867"><img alt="/!\" height="15" src="/moin_static163/rightsidebar/img/alert.png" title="/!\" width="15" /> Please note that you <strong>must</strong> <em>rebuild</em> your index if you change at least one of xapian_index_history, xapian_index_dir or xapian_stemming configuration options! <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><p class="line867">
<h2 id="Testing">Testing</h2>
<span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><p class="line862">You can test if Xapian is enabled and if an index is available by checking <a href="/group/SystemInfo">SystemInfo</a>. To check if searches are performed using Xapian, enable show_timings in your wikiconfig, perform a search and look for _xapianSearch on the bottom of the page. <span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><p class="line867">
<h1 id="Usage">Usage</h1>
<span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><p class="line862">Xapian is basically used the same way as all other search engines. Due to Xapian's advanced features some new search term prefixed were introduced which are not already available in the legacy search engine (commonly referred to as moin search). See <a href="/group/HelpOnSearching">HelpOnSearching</a> for more information and/or use the new advanced search dialogue available on <a href="/group/FindPage">FindPage</a> to see what's available and possible. <span class="anchor" id="line-75"></span><span class="anchor" id="bottom"></span></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>
</body>
</html>

